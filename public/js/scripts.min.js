function insertEventData(event){console.log(event),event.title&&(console.log(event.title),$("#calendarTitle").val(event.title)),null!=event.start&&(console.log(event.start._i),$("#start").val(event.start._i)),null!=event.end&&(console.log(event.end._i),$("#end").val(event.end._i)),event.description&&(console.log(event.description),$("#description").val(event.description)),$("calendarSubmit").val("Update")}$("#calendarSubmit").on("click",function(){calendar=$("#calendar").fullCalendar("getCalendar"),title=$("#calendarTitle").val(),start=$("#calendarStart").val(),end=$("#calendarEnd").val(),description=$("#calendarDescription").val(),uid=$("#hdnSession").val(),console.log(uid),console.log(title),console.log(start),console.log(end),console.log(description),$.ajax({url:"calendar",type:"POST",data:{insert:!0,title:title,type_id:1,start:start,end:end,description:description,person_id:uid},complete:function(data){calendar.fullCalendar("refetchEvents")},failure:function(){alert("Error")}})}),$(document).ready(function(){$("input[type=radio][name=type_id]").change(function(){"2"==this.value?($("#dueDate").show(),$("#dueDate").attr("required",!0),$("#dueDateLabel").show(),$("#priority").show(),$("#startLabel").hide(),$("#start").hide(),$("#endLabel").hide(),$("#end").hide()):"1"==this.value&&($("#dueDate").hide(),$("#dueDateLabel").hide(),$("#priority").hide(),$("#startLabel").show(),$("#start").show(),$("#start").attr("required",!0),$("#endLabel").show(),$("#end").show(),$("#end").attr("required",!0))})}),jQuery(document).ready(function(){var calendarLity,calendar,monthViewSize;$("#calendar").length&&(calendar=$("#calendar").fullCalendar({height:$(window).height()-80,nowIndicator:!0,editable:!0,dayMaxEvents:!0,header:!1,initialView:"dayGridMonth",events:function(start,end,timezone,callback){$.ajax({url:"calendar",type:"POST",data:{load:!0},complete:function(data){var responseText=JSON.stringify(data.responseText),events=[];if(""!=(responseText=(responseText=JSON.parse(responseText)).split(/<(.*)/s))[0]){for(var responseText=JSON.parse(responseText[0]),i=0;i<responseText.length;i++)1==responseText[i].type_id&&events.push({item_id:responseText[i].item_id,type_id:responseText[i].type_id,title:responseText[i].title,start:responseText[i].start,end:responseText[i].end,due_date:responseText[i].due_date,description:responseText[i].description,additional_notes:responseText[i].additional_notes,priority:responseText[i].priority,completed:responseText[i].completed,associated_item:responseText[i].associated_item});callback(events)}else callback(null)},failure:function(data){alert("Error")}})},selectable:!0,selectHelper:!0,select:function(start,end,allDay){calendarLity=lity("#calendarPopout"),$("#calendarPopout").data("lity")&&(console.log($.fullCalendar.formatDate(start,"Y-MM-DD HH:mm:ss")),$("#start").val($.fullCalendar.formatDate(start,"Y-MM-DD HH:mm:ss")),$("#end").val($.fullCalendar.formatDate(end,"Y-MM-DD HH:mm:ss"))),calendarLity.opener(),calendarLity.toggled=!0},eventResize:function(event){var start=$.fullCalendar.formatDate(event.start,"Y-MM-DD HH:mm:ss"),end=$.fullCalendar.formatDate(event.end,"Y-MM-DD HH:mm:ss");event.title,event.id;$.ajax({url:"calendar",type:"POST",data:{update:!0,title:event.title,type_id:event.type_id,start:start,end:end,item_id:event.item_id,due_date:event.due_date,description:event.description,additional_notes:event.additional_notes,priority:event.priority,completed:event.completed,associated_item:event.associated_item},success:function(data){calendar.fullCalendar("refetchEvents")},failure:function(){alert("Error")}})},eventDrop:function(event){var start=$.fullCalendar.formatDate(event.start,"Y-MM-DD HH:mm:ss"),end=$.fullCalendar.formatDate(event.end,"Y-MM-DD HH:mm:ss");event.title,event.item_id;console.log(event),$.ajax({url:"calendar",type:"POST",data:{update:!0,title:event.title,type_id:event.type_id,start:start,end:end,item_id:event.item_id,due_date:event.due_date,description:event.description,additional_notes:event.additional_notes,priority:event.priority,completed:event.completed,associated_item:event.associated_item},success:function(data){calendar.fullCalendar("refetchEvents")},failure:function(){alert("Error")}})},eventClick:function(event){calendarLity=lity("#calendarPopout");$("#calendarPopout").data("lity");calendarLity.opener(),calendarLity.toggled=!0,insertEventData(event),$.ajax({url:"calendar",type:"POST",data:{delete:!0,item_id:item_id},success:function(data){calendar.fullCalendar("refetchEvents")},failure:function(){alert("Error")}})}}),monthViewSize=$(window).width()<768?"listWeek":"month",$(window).resize(function(){var calHeight=$(window).height()-80;$("#calendar").fullCalendar("option","height",calHeight)}),$("#dayViewBtn").click(function(){$("#calendar").fullCalendar("changeView","agendaDay")}),$("#weekViewBtn").click(function(){$("#calendar").fullCalendar("changeView","agendaWeek")}),$("#monthViewBtn").click(function(){$("#calendar").fullCalendar("changeView",monthViewSize)}),$(window).resize(function(){$(window).width()}))});var myLity=null,toggled=!1,home=($("#popoutButton").on("click",function(){console.log(myLity),console.log(toggled),toggled=0==toggled?((myLity=lity("#itemPopout")).opener(),!0):(myLity.close(),!1)}),document.addEventListener("DOMContentLoaded",function(){document.getElementById("schoolSelect")&&(document.getElementById("schools").addEventListener("change",function(){document.getElementById("schools").value=this.value,console.log(document.getElementById("schools").value)}),document.getElementById("courses").addEventListener("change",function(){document.getElementById("courses").value=this.value,console.log(document.getElementById("courses").value)}))}),{init:function(){new Glide(".glide",{type:"carousel",perView:1,animationDuration:2e3,startAt:2}).mount()}});function map(postcode){mapboxgl.accessToken="pk.eyJ1IjoicmF4bWVubmllIiwiYSI6ImNsNWhicXNhaDAybGMzYm41bGM1bTE1azUifQ.lHeVylv1rWu6iI1d8SU7Ow";$.get("https://api.mapbox.com/geocoding/v5/mapbox.places/"+postcode+".json?proximity=ip&types=place%2Cpostcode%2Caddress&access_token=pk.eyJ1IjoicmF4bWVubmllIiwiYSI6ImNsNWhicXNhaDAybGMzYm41bGM1bTE1azUifQ.lHeVylv1rWu6iI1d8SU7Ow",function(data){var longtitude=data.features[0].center[0],data=data.features[0].center[1],map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[longtitude,data],zoom:18});(new mapboxgl.Marker).setLngLat([longtitude,data]).addTo(map);return map})}function toggleSideNav(){document.getElementById("NavAnchor").classList.toggle("minimised"),document.getElementsByClassName("sidebar-included")[0].classList.toggle("maximised")}$("#grat-btn").click(function(){var grats,entry_date;console.log("clicked"),""==$("#item-1").val()||""==$("#item-2").val()||""==$("#item-3").val()?alert("Please fill in all three items!"):(grats=$("#item-1").val()+", "+$("#item-2").val()+" and "+$("#item-3").val(),entry_date=new Date,$.ajax({url:"calendar",type:"POST",data:{gratitude:grats,entry_date:entry_date},success:function(data){console.log(data),$("#grat-btn").hide(),$("#grat-form").hide(),$("#grat-form").html("<h3>Thank you for your gratitude!</h3>")}}))}),$(".delete").click(function(e){id=e.currentTarget.offsetParent.attributes[1].nodeValue,parent=e.currentTarget.offsetParent,console.log(id),$.ajax({url:"calendar",type:"POST",data:{delete:!0,item_id:id},success:function(data){location.href="./tasks"}})}),$(".complete").click(function(e){id=e.currentTarget.offsetParent.attributes[1].nodeValue,console.log(id),$.ajax({url:"calendar",type:"POST",data:{complete:!0,item_id:id},success:function(data){}})}),$(".edit").click(function(e){id=e.currentTarget.offsetParent.attributes[1].nodeValue,console.log(e.currentTarget.offsetParent),(myLity=lity("#itemPopout")).opener(),toggled=!0,$("#title").val(e.currentTarget.offsetParent.children[0].innerText),$("#description").val(e.currentTarget.offsetParent.children[1].innerText),$("#date").val(e.currentTarget.offsetParent.children[2].innerText),$("#item_id").val(id)}),$("#changePassword").click(function(){$("#passwordChange").toggle(),$("#profilePicChange").hide()}),$("#changeProfilePic").click(function(){$("#profilePicChange").toggle(),$("#passwordChange").hide()});